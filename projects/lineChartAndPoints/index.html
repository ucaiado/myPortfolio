<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Line Chart and Points</title>
  <link href='http://fonts.googleapis.com/css?family=Lato:100,300,900' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,600,700,800,300' rel='stylesheet' type='text/css'>  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <!-- JS and CSS files to highlight code blocks-->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/tomorrow.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <link rel="stylesheet" type="text/css" href="../../Stylesheet/mystyle.css"> 
  <link rel="stylesheet" type="text/css" href="chart.css">
  <script type="text/javascript" src="chart.js"></script>

  <link rel="stylesheet" href="../../Stylesheet/font-awesome/css/font-awesome.min.css">


</head>

<body>


	<!-- some text -->
	<div class="container">
	  
      <div class="row">
        <div class="col-md-9 col-md-offset-2">
          <h1>My First Line Chart !</h1>
        </div>
      </div>

      <!-- my chart -->
		<div class="row  text-rigth">
		  <!-- <div class = "col-md-8 col-md-offset-2"> -->
		  <div class = "col-md-6 col-md-offset-4">
		      <div><h4>Market Chart and trades <small class="reset" style="display:none;" >| <a href="#">Reset All</a></small></h4></div>
		      <!-- <button>Reset</button> -->
		  </div>
		</div>

		<div class="row  text-center">
		  <!-- <div class = "col-md-8 col-md-offset-2"> -->
		  <div class = "col-md-12">
		    <div id = "MktCurve"\></div>
		  </div>
		</div>


	 <!-- description -->

	  <div class="row">
	    <div class="col-md-9 col-md-offset-2">
	      <h2><a name="talks" href="#talks">#</a>Summary</h2>
	    </div>
	  </div>

		<div class="row">
			<div class="col-md-8 col-md-offset-2 text-justify">       

				<p>The data used to plot the chart bellow shows some simulated trades made by an algorithmic strategy in a brazilian stock asset. The data includes the intraday market price of this asset, the  purchases and sales made throughout the day, and if each trade made money or not. All these information is organized by hour.<p>

				<p>I decided to plot the market price using a line chart since the dataset is a time series. Following the examples given by this <a href="http://www.targetprocess.com/articles/visual-encoding.html">article</a>, I described how each information was encoded in the next session.</p>

				<p>I would like to allow the reader explores each trade made by the strategy and, at the same time, get a sense of how well the stategy was that day, even though without plotting a <a href="http://www.investopedia.com/terms/p/plstatement.asp">P&L</a> Line Chart.</p>

				<p>This chart was made using D3.js library and I included several features to help the user visualize better all the informations. You can check the code source on my<a href="https://github.com/ucaiado/myPortfolio/tree/gh-pages/projects/lineChartAndPoints"> GitHub</a>.</p>
			</div>
		</div>


	  <div class="row">
	    <div class="col-md-9 col-md-offset-2">
	      <h2><a name="talks" href="#talks">#</a>Design</h2>
	    </div>
	  </div>

	  <div class="row">
	    <div class="col-md-8 col-md-offset-2 text-justify">       
			
	      <p>I made a natural decision to encode the data about the Price and Time, as far as it is a time-series. The trade was enconded as triangles to show if it was a Buy(up) or a Sell (down). As I would like to highlight the performance that day, I colored when each trade made money (green) or not (red).</p>

	      <p>Since there are many data encoded at this chart, I included gridlines to help the reader norrowing the focus  to some areas, as sugested on this <a href="http://www.perceptualedge.com/articles/dmreview/grid_lines.pdf">article</a>. I also included a zoom behaviour to allow the reader explore better the data.</p>

		</div>
	  </div>

	  <div class="row">	  
		<div class="col-md-8 col-md-offset-2 text-justify"> 

			<div class="table-responsive">
				<table class="table table-hover table-condensed">
					<thead>
						<tr>
							<td><b>Variable</b></td>
							<td><b>Type</b></td>
							<td><b>Encoding</b></td>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Market Price</td>
							<td>Quantitative</td>
							<td>Y</td>
						</tr>
						<tr>
							<td>Date / Time</td>
							<td>Ordered</td>
							<td>X</td>
						</tr>
						<tr>
							<td>About each Trade: Price</td>
							<td>Quantitative</td>
							<td>Y</td>
						</tr>
						<tr>
							<td>About each Trade: Time</td>
							<td>Ordered</td>
							<td>X</td>
						</tr>
						<tr>
							<td>About each Trade: Buy or Sell</td>
							<td>Categorical</td>
							<td>Shape</td>
						</tr>
						<tr>
							<td>About each Trade: Made Money?</td>
							<td>Categorical</td>
							<td>Color Hue</td>
						</tr>
					</tbody>

				</table>
			</div>
	    </div>
	  </div>


	  <div class="row">
	    <div class="col-md-9 col-md-offset-2">
	      <h2><a name="talks" href="#talks">#</a>Resources</h2>
	    </div>
	  </div>

	  <div class="row">
	    <div class="col-md-8 col-md-offset-2 text-justify">       

	      <ol>
			<li><a href="http://bl.ocks.org/mbostock/3892928">Here</a> is how I dealt with the D3 zoom behavior;</li>
			<li><a href="http://bost.ocks.org/mike/path/">Here</a> is where I understood why use a clip path;</li>
			<li>I learned how to limiting the Zoom and Pan on this <a href="http://bl.ocks.org/garrilla/11280861">bl.ock</a>;</li>
			<li>I learned how to deal with grid lines <a href="http://stackoverflow.com/questions/15580300/proper-way-to-draw-gridlines">here</a>;</li>
			<li>I learned how to draw triangles <a href="http://bl.ocks.org/mbostock/3244058">here</a>;</li>
			<li>And finally, I understood how to rescale my SVG <a href="http://jsfiddle.net/BTfmH/12/">here</a>;</li>
			<li>I didn't use it, but <a hre="http://bl.ocks.org/mbostock/8033015">it</a> is really nice =).</li>
	  	  </ol>
	    </div>
	  </div>







	  <div class="row">
	    <div class="col-md-9 col-md-offset-2">
	      <h2><a name="talks" href="#talks">#</a>TODO</h2>
	    </div>
	  </div>

	  <div class="row">
	    <div class="col-md-8 col-md-offset-2 text-justify">       
	      <ol>
	          <li>include sketch</li>
	          <li>point some interesting code that I included as the auto re-scale and the zoom behaviour.</li>
	          <li>Include context to the chart (legend)</li>
	  	  </ol>
	    </div>
	  </div>


      <!-- blanck line -->  
      <div id="main" class="container clear-top">
        <div class="row">
          <div class="col-md-8 col-md-offset-2 text-left">
          </div>
        </div>
      </div>

      <!-- Fixed navbar -->
      <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://ucaiado.github.io/myPortfolio/"><b>Uirá Caiado</b></a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
              
<!--               <li><a href="https://github.com/ucaiado" class="navbar-link">my GitHub</a></li>
              <li><a href="http://bl.ocks.org/ucaiado" class="navbar-link">my bl.ocks</a></li>
              <li class="active"><a href="http://br.linkedin.com/in/ucaiado" class="navbar-link"> my LinkedIn</a></li> -->
              <li><a href="https://github.com/ucaiado" class="navbar-link"><i class="fa fa-github fa-lg"></i></a></li>
              <li><a href="http://bl.ocks.org/ucaiado" class="navbar-link"><i class="fa fa-area-chart fa-lg"></i></a></li>
              <li class="active"><a href="http://br.linkedin.com/in/ucaiado" class="navbar-link"><i class="fa fa-linkedin fa-lg"></i></a>

            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </nav>          

      
      <!-- blanck lines -->  
      <div id="main" class="container clear-top">
        <div class="row">
          <div class="col-md-8 col-md-offset-2 text-left">
          	<br/>
          	<br/>
          	<br/>
          	<br/>
          </div>
        </div>
      </div> 

      <!-- disqus-->  
      <div id="main" class="container clear-top">
        <div class="row">
          <div class="col-md-8 col-md-offset-2 text-left">
          	<div id="disqus_thread"></div>
          </div>
        </div>
      </div>


	  

      <footer>
        <aside>2014</aside>
          Built by <a href="http://br.linkedin.com/in/ucaiado">Uirá Caiado</a> using <a href="http://getbootstrap.com">Boostrap</a>.
      </footer>

	</div><!-- end container -->




  
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'ucaiadogithubiomyportfolio'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    



	<script type="text/javascript">  
	//set the parser to date / time
	format = d3.time.format("%Y-%m-%d %H:%M:%S.%L");

	d3.csv("data/df_marks.csv", function(d) {
	  // transform data
	  var str = d['DATE'];
	  if (str.length<20){
	    str+='.000000';
	  };
	  d['DATE'] = format.parse(str.substring(0, 23));
	  d['id_mkt'] = +d['id_mkt'];
	  d['Lado'] = +d['Lado']
	  d['Resultado'] = +d['Resultado']
	  d['Tipo'] = +d['Tipo']
	  d['Qtd'] = +d['Qtd']
	  d['preco'] = +d['preco']
	  d['Boleta'] = +d['Boleta']

	  return d;
	  },//end transform data
	  draw);
	</script>

      <!-- Bootstrap core JavaScript
      ================================================== -->
      <!-- Placed at the end of the document so the pages load faster -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>





</body>
</html>
